name: tagged-release
on:
    push:
        tags:
            - "v*"
jobs:
    release:
        name: "Release"
        runs-on: ubuntu-latest
        steps:
            - uses: "marvinpinto/action-automatic-releases@latest"
              with:
                repo_token: ${{ secrets.RELEASE_TOKEN }}
                prerelease: false
            - name: "add-tags"
              run: |
                cd $GITHUB_WORKSPACE
                IFS=',' read -ra TAGS <<< "$GITHUB_REF"
                for tag in "${TAGS[@]}"; do
                  git tag -a "$tag" -m "$tag"
                done
                git push origin "${TAGS[@]}"
                shell: /usr/bin/bash -e {0}
