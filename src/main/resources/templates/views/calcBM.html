<!DOCTYPE html>
<html xmlns:th="https://thymeleaf.org">
    <head>
        <title>Calculate your BM</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link th:href="@{https://fonts.googleapis.com/css?family=Montserrat:400,700}" rel="stylesheet" type="text/css"/>
        <link th:href="@{https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic}" rel="stylesheet"
              type="text/css"/>
    </head>
    <body>
    <div id="alertContainer" style="position: fixed; top: 20px; right: 20px; z-index: 9999;">
    </div>
    <div class="p-3 bg-dark rounded shadow text-center mb-5">
        <h2 class="text-white display-2">BM Calculator</h2>
        <p class="lead text-white mt-3">Calculate your BM and set up your objectives</p>
    </div>
    <hr>
    <div class="m-1 p-2 bg-light rounded shadow">
        <div class="row m-3">
            <div class="col-md-6">
                <p class="display-5 text-center bg-dark text-white rounded shadow p-3">
                    Check your data
                </p>
                <p class="text-center">
                    <a class="btn text-muted fs-5" data-bs-toggle="collapse" href="#uptData" role="button" aria-expanded="false"
                       aria-controls="userData">
                    To do any modification, please click here
                    </a>
                </p>
                <hr>
                <input type="hidden" id="csrf" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <div class="form-group m-2 p-1">
                    <form id="bmData" method="post" th:action="@{/api/updateBMData/{id}(id=${user.id})}" th:object="${personalDataDTO}">
                        <label for="age">Age</label>
                        <input id="age" type="text" class="form-control bmData" th:placeholder="${BMData.age}" th:field="*{age}">
                        <label for="gender">Gender</label>
                        <input id="gender" type="text" class="form-control bmData" th:field="*{gender}" th:placeholder="${BMData.gender}">
                        <label for="weight"></label>Weight
                        <input id="weight" type="text" class="form-control bmData" th:field="*{weight}" th:placeholder="${BMData.weight}">
                        <label for="height">Height</label>
                        <input id="height" type="text" class="form-control bmData" th:field="*{height}" th:placeholder="${BMData.height}">
<!--                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>-->
                        <a id="uptData" class="collapse" onclick="ajaxForm('bmData')">
                            <button type="button" class="btn btn-secondary mt-3">
                                Update data
                                <div id="bmDataSpinner" class="spinner-border spinner-border-sm" role="status"></div>
                            </button>
                        </a>
                    </form>
                </div>
            </div>

            <div class="col-md-6">
                <p class="display-5 text-center bg-dark text-white rounded shadow p-3">
                    Check your objectives
                </p>
                <p class="text-muted text-center fs-5">
                    Set up the type of diet that you want to follow
                </p>
                <hr>
                <div class="form-group m-2 p-1">
                    <form id="bmCalc" method="post" th:action="@{/api/updateBMCalc/{id}(id=${user.id})}" th:object="${BMDataDTO}">
                        <label for="baseBM">Calculated BM</label>
                            <input class="form-control" type="text" id="baseBM" th:value="${BMData.baseBM}" readonly>
                        <label for="numDaysEx">How often do you exercise each week?</label>
                            <select class="form-select" id="numDaysEx" th:field="*{numDaysEx}">
                                <option value=0 th:selected="${obj?.numDaysEx == 0}">I don't do any exercise</option>
                                <option value=1 th:selected="${obj?.numDaysEx == 1}">Once a week</option>
                                <option value=2 th:selected="${obj?.numDaysEx == 2}">Twice a week</option>
                                <option value=3 th:selected="${obj?.numDaysEx == 3}">Three times a week</option>
                                <option value=4 th:selected="${obj?.numDaysEx == 4}">Four times a week</option>
                                <option value=5 th:selected="${obj?.numDaysEx == 5}">Five times a week</option>
                                <option value=6 th:selected="${obj?.numDaysEx == 6}">Six times a week</option>
                                <option value=7 th:selected="${obj?.numDaysEx == 7}">Seven times a week</option>
                            </select>
                        <label for="dietType">Diet type</label>
                            <select class="form-select" id="dietType" th:field="*{dietType}">
                                <option value="def" th:selected="${obj?.dietType == 'def'}">Definition</option>
                                <option value="main" th:selected="${obj?.dietType == 'main'}">Maintaining</option>
                                <option value="gain" th:selected="${obj?.dietType == 'gain'}">To gain weight</option>
                            </select>
                        <label for="finalBM">Total BM</label>
                            <input id="finalBM" type="text" class="form-control" th:value="${BMData.totalBM}" readonly>
<!--                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>-->
                        <button type="submit" class="btn btn-success mt-3">
                            Calculate
                            <div class="spinner-border spinner-border-sm" role="status"></div>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    </body>
</html>